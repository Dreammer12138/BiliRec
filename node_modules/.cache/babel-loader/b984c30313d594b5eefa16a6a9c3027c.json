{"remainingRequest":"/home/seenight/文档/Docker/Controller/RecStream/node_modules/thread-loader/dist/cjs.js!/home/seenight/文档/Docker/Controller/RecStream/node_modules/babel-loader/lib/index.js!/home/seenight/文档/Docker/Controller/RecStream/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/seenight/文档/Docker/Controller/RecStream/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/seenight/文档/Docker/Controller/RecStream/src/views/Files.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/seenight/文档/Docker/Controller/RecStream/src/views/Files.vue","mtime":1618047505026},{"path":"/home/seenight/文档/Docker/Controller/RecStream/node_modules/cache-loader/dist/cjs.js","mtime":1617956900225},{"path":"/home/seenight/文档/Docker/Controller/RecStream/node_modules/thread-loader/dist/cjs.js","mtime":1617956900156},{"path":"/home/seenight/文档/Docker/Controller/RecStream/node_modules/babel-loader/lib/index.js","mtime":1617956900396},{"path":"/home/seenight/文档/Docker/Controller/RecStream/node_modules/cache-loader/dist/cjs.js","mtime":1617956900225},{"path":"/home/seenight/文档/Docker/Controller/RecStream/node_modules/vue-loader/lib/index.js","mtime":1617956953101}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaWxlcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlckNvbnRlbnQ6ICLmlofku7YiLAogICAgICBmaWxlczogW10sCiAgICAgIHNlYXJjaDogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb0JhY2s6IGZ1bmN0aW9uIGdvQmFjaygpIHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubmF2QWN0aXZlID0gIi8iOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgfSwKICAgIGdldEZpbGVzOiBmdW5jdGlvbiBnZXRGaWxlcygpIHsKICAgICAgdmFyIEFQSSA9IHRoaXMuJHN0b3JlLnN0YXRlLkFQSTsKICAgICAgdmFyIHYgPSB0aGlzOwogICAgICB2LiRheGlvcy5nZXQoQVBJLmZpbGUuZ2V0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2LmZpbGVzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaEZpbGU6IGZ1bmN0aW9uIHNlYXJjaEZpbGUoKSB7CiAgICAgIHZhciByZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGZpbGUgaW4gdGhpcy5maWxlcykgewogICAgICAgIGlmICh0aGlzLmZpbGVzW2ZpbGVdLlRpdGxlLmluZGV4T2YodGhpcy5zZWFyY2gpICE9PSAtMSB8fCB0aGlzLmZpbGVzW2ZpbGVdLkZpbGVOYW1lLmluZGV4T2YodGhpcy5zZWFyY2gpICE9PSAtMSkgewogICAgICAgICAgcmVzLnB1c2godGhpcy5maWxlc1tmaWxlXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfSwKICAgIHJlY29kZTogZnVuY3Rpb24gcmVjb2RlKEZpbGVOYW1lLCBmb3JtYXQsIHRpdGxlLCBMaXZlVVJMKSB7CiAgICAgIHZhciBBUEkgPSB0aGlzLiRzdG9yZS5zdGF0ZS5BUEk7CiAgICAgIHZhciB2ID0gdGhpczsKICAgICAgdi4kYXhpb3MucG9zdChBUEkuZmlsZS5yZWNvZGUsIHsKICAgICAgICBGaWxlTmFtZTogRmlsZU5hbWUsCiAgICAgICAgZm9ybWF0OiBmb3JtYXQsCiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIExpdmVVUkw6IExpdmVVUkwKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykgewogICAgICAgICAgdi4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogJ+ato+WcqOi9rOeggScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fnqI3lkI7liLfmlrDmn6XnnIsnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUZpbGU6IGZ1bmN0aW9uIGRlbGV0ZUZpbGUoRmlsZU5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBBUEkgPSB0aGlzLiRzdG9yZS5zdGF0ZS5BUEk7CiAgICAgIHZhciB2ID0gdGhpczsKICAgICAgdi4kYXhpb3MucG9zdChBUEkuZmlsZS5kZWxldGUsIHsKICAgICAgICBGaWxlTmFtZTogRmlsZU5hbWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykgewogICAgICAgICAgdi4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuZ2V0RmlsZXMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRGaWxlcygpOwogIH0KfTs="},{"version":3,"sources":["Files.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,SAAA,GAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,KAJA;AAKA,IAAA,QALA,sBAKA;AACA,UAAA,GAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,UAAA,CAAA,GAAA,IAAA;AACA,MAAA,CAAA,CAAA,MAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,CAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA;AACA,OAFA;AAGA,KAXA;AAYA,IAAA,UAZA,wBAYA;AACA,UAAA,GAAA,GAAA,EAAA;;AACA,WAAA,IAAA,IAAA,IAAA,KAAA,KAAA,EAAA;AACA,YACA,KAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,OAAA,CAAA,KAAA,MAAA,MAAA,CAAA,CAAA,IACA,KAAA,KAAA,CAAA,IAAA,EAAA,QAAA,CAAA,OAAA,CAAA,KAAA,MAAA,MAAA,CAAA,CAFA,EAGA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,IAAA,CAAA;AACA;AACA;;AACA,aAAA,GAAA;AACA,KAvBA;AAwBA,IAAA,MAxBA,kBAwBA,QAxBA,EAwBA,MAxBA,EAwBA,KAxBA,EAwBA,OAxBA,EAwBA;AACA,UAAA,GAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,UAAA,CAAA,GAAA,IAAA;AACA,MAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,QAAA,QAAA,EAAA,QADA;AAEA,QAAA,MAAA,EAAA,MAFA;AAGA,QAAA,KAAA,EAAA,KAHA;AAIA,QAAA,OAAA,EAAA;AAJA,OAAA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,UAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,EAAA,MADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AAIA;AACA,OAZA;AAaA,KAxCA;AAyCA,IAAA,UAzCA,sBAyCA,QAzCA,EAyCA;AAAA;;AACA,UAAA,GAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,UAAA,CAAA,GAAA,IAAA;AACA,MAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,UAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,EAAA;AADA,WAAA;AAGA;;AACA,QAAA,KAAA,CAAA,QAAA;AACA,OARA;AASA;AArDA,GATA;AAgEA,EAAA,OAhEA,qBAgEA;AACA,SAAA,QAAA;AACA;AAlEA,CAAA","sourcesContent":["<template>\n  <div id=\"files\">\n    <div class=\"topBar\">\n      <el-page-header @back=\"goBack\" :content=\"headerContent\"></el-page-header>\n    </div>\n    <div class=\"content\">\n      <div class=\"searchBar\">\n        <el-input\n          v-model=\"search\"\n          placeholder=\"请输入内容\"\n          class=\"input-with-select\"\n        >\n          <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\n        </el-input>\n      </div>\n      <el-alert\n        title=\"频繁转码会导致视频质量下降，请勿频繁转码\"\n        type=\"warning\">\n      </el-alert>\n      <el-table :data=\"searchFile()\" style=\"width: 100%\" height=\"725\">\n        <el-table-column sortable prop=\"Title\" label=\"标题\" width=\"250\">\n          <template slot-scope=\"scope\">\n            <el-link :href=\"'/Movie/' + scope.row.FileName\">{{ scope.row.Title }}</el-link>\n          </template>\n        </el-table-column>\n        <el-table-column sortable prop=\"FileName\" label=\"文件名\" width=\"300\">\n        </el-table-column>\n        <el-table-column sortable prop=\"Date\" label=\"日期\" width=\"150\">\n        </el-table-column>\n        <el-table-column sortable prop=\"Time\" label=\"时长\"> </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-popover placement=\"right\">\n              <div style=\"text-align: right; margin: 0\">\n                <el-button\n                  size=\"mini\"\n                  @click=\"recode(scope.row.FileName, 'mp4', scope.row.Title, scope.row.LiveURL)\"\n                >\n                  MP4\n                </el-button>\n                <el-button\n                  size=\"mini\"\n                  @click=\"recode(scope.row.FileName, 'flv', scope.row.Title, scope.row.LiveURL)\"\n                >\n                  FLV\n                </el-button>\n                <el-button\n                  size=\"mini\"\n                  @click=\"recode(scope.row.FileName, 'mov', scope.row.Title, scope.row.LiveURL)\"\n                >\n                  MOV\n                </el-button>\n              </div>\n              <el-button size=\"mini\" slot=\"reference\">转码</el-button>\n            </el-popover>\n            <el-button @click=\"deleteFile(scope.row.FileName)\" size=\"mini\" type=\"danger\" style=\"margin: 0 0.5rem\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"files\",\n  data() {\n    return {\n      headerContent: \"文件\",\n      files: [],\n      search: \"\",\n    };\n  },\n  methods: {\n    goBack() {\n      this.$store.state.navActive = \"/\";\n      this.$router.push(\"/\");\n    },\n    getFiles() {\n      const API = this.$store.state.API;\n      let v = this;\n      v.$axios.get(API.file.get).then((res) => {\n        v.files = res.data;\n      });\n    },\n    searchFile() {\n      let res = [];\n      for (let file in this.files) {\n        if (\n          this.files[file].Title.indexOf(this.search) !== -1 ||\n          this.files[file].FileName.indexOf(this.search) !== -1\n        ) {\n          res.push(this.files[file]);\n        }\n      }\n      return res;\n    },\n    recode(FileName, format, title, LiveURL) {\n      const API = this.$store.state.API;\n      let v = this;\n      v.$axios.post(API.file.recode, { \n        FileName,\n        format,\n        title,\n        LiveURL\n      }).then(res => {\n        if (res.data.status) {\n          v.$notify.success({\n            title: '正在转码',\n            message: '请稍后刷新查看'\n          })\n        }\n      });\n    },\n    deleteFile(FileName) {\n      const API = this.$store.state.API;\n      let v = this;\n      v.$axios.post(API.file.delete, { FileName })\n      .then(res => {\n        if (res.data.status) {\n          v.$notify.success({\n            title: '成功'\n          })\n        }\n        this.getFiles();\n      });\n    },\n  },\n  mounted() {\n    this.getFiles();\n  },\n};\n</script>\n\n<style scoped>\n.searchBar {\n  width: 30%;\n  margin-top: 15px;\n  margin-bottom: 15px;\n}\n.el-dropdown {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown {\n  margin-left: 15px;\n}\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n</style>"],"sourceRoot":"src/views"}]}